def gv
pipeline{
  agent any
  tools{
    maven 'Maven 3.9.6'
  }
  environment{
    NEW_VERSION = '1.0.0' 
  }
  stages{  
  stage("init"){
      steps{
        script{
          gv = load "jenkinsript.groovy"
        }
      }
    }  
  stage("Build"){
      steps{
        script{
          gv.buildApp()
        }
      }
    }
    stage("Test"){
      steps{
        script{
          gv.testApp()
        }
      }
    }
    stage("Deploy"){
      steps{
        script{
          gv.deployApp()
        }
      }
    }
  }
}
