pipeline{
  agent any
  environment{
    NEW_VERSION = "1.0.0"
  }
  stages{
    stage("Testing"){
      when{
        expression{
          NEW_VERSION == "1.0"
        }
      }
      steps{
        echo "Running test!"
      }
    }
    stage("Building"){
      steps{
        echo "Building Application!"
      }
    }
    stage("Deploying"){
      steps{
        echo "Deploying Application"
      }
    }
  }

  post{
    always{ 
      echo "Process End!"
    }
    success{
      echo "Completed with success!"
    }
    failure{
      echo "failed!"
    }
  }

}
