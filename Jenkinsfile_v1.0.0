def gv

pipeline{
    agent any
    tools{
        maven 'Maven 3.9.6'
    }
    stages{
        stage("init"){
            steps{
                script{
                  gv = load "scriptv1.0.0.groovy"
                }
            }
          }
        stage("Build APP"){
            script{
              gv.buildApp()
            }
          }
        stage("Create image and deploy"){
            steps{
                script{
                  withCredentials([
                    usernamePassword(credentialsId: '', usernameVariable: 'USERNAME', passwordVariable: 'PASSWORD')
                  ]){
                    gv.deployApp()
                  }
                }
            }
          }
    }
}
