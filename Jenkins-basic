pipeline{
  agent any
  environment{
    NEW_VERSION = '1.0.0'
    SERVER_CREDENTIALS = credentials('server_credentials')
  }
  stages{
      stage("Testing"){
        steps{
          echo "Testing is running!"
          echo  "new version is ${NEW_VERSION}"
          echo  "new version is ${SERVER_CREDENTIALS}"
          sh "${SERVER_CREDENTIALS}"
        }
      }
      stage("Building"){
       steps{
          echo "Building is running!"
        }
      }
      stage("Deploying"){
        steps{
          echo "Deploying is running!"
        }
      }
  }

  post{
    always{
        echo "Default always!"
    }
    success{
        echo "Sucess"
    }
    failure{
        echo "failed"
    }
  }
}
