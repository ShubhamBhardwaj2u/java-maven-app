pipeline{
  agent any
  environment{
    NEW_VERSION = '1.0.0'
  }
  stages{
      stage("Testing"){
        steps{
          echo "Testing is running!"
          echo  "new version is ${NEW_VERSION}"
        }
      }
      stage("Building"){
       steps{
          echo "Building is running!"
        }
      }
      stage("Deploying"){
        steps{
          echo "Deploying is running!"
          withCredentials([
            usernamePassword(credentials: 'server_credentials', usernameVariable: USER, passwordVariable: PWD)
          ]) {
            echo "${USER} AND ${PWD}"
          }
        }
      }
  }

  post{
    always{
        echo "Default always!"
    }
    success{
        echo "Sucess"
    }
    failure{
        echo "failed"
    }
  }
}
